<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>构造函数 | kory&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/blog/favicon.ico">
    <meta name="description" content="管他什么真理无穷，进一步有进一步的欣喜">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/blog/assets/css/0.styles.257c2cf1.css" as="style"><link rel="preload" href="/blog/assets/js/app.78442544.js" as="script"><link rel="preload" href="/blog/assets/js/3.0ac8ca5b.js" as="script"><link rel="preload" href="/blog/assets/js/1.1171ce4e.js" as="script"><link rel="preload" href="/blog/assets/js/14.3b271529.js" as="script"><link rel="preload" href="/blog/assets/js/9.259b0972.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.9cd6b22a.js"><link rel="prefetch" href="/blog/assets/js/11.e43ef649.js"><link rel="prefetch" href="/blog/assets/js/12.b22fdb86.js"><link rel="prefetch" href="/blog/assets/js/13.66a15cd6.js"><link rel="prefetch" href="/blog/assets/js/15.2f0461bd.js"><link rel="prefetch" href="/blog/assets/js/16.0b9b8525.js"><link rel="prefetch" href="/blog/assets/js/17.fa88c583.js"><link rel="prefetch" href="/blog/assets/js/18.724a3378.js"><link rel="prefetch" href="/blog/assets/js/19.12192a7c.js"><link rel="prefetch" href="/blog/assets/js/20.115a1995.js"><link rel="prefetch" href="/blog/assets/js/21.80924169.js"><link rel="prefetch" href="/blog/assets/js/22.7ff92efc.js"><link rel="prefetch" href="/blog/assets/js/23.6525c817.js"><link rel="prefetch" href="/blog/assets/js/24.a955f9b0.js"><link rel="prefetch" href="/blog/assets/js/25.0be9fc91.js"><link rel="prefetch" href="/blog/assets/js/26.292b7e2c.js"><link rel="prefetch" href="/blog/assets/js/27.fa90754e.js"><link rel="prefetch" href="/blog/assets/js/28.1798ea2f.js"><link rel="prefetch" href="/blog/assets/js/29.e8325b2e.js"><link rel="prefetch" href="/blog/assets/js/30.140341e2.js"><link rel="prefetch" href="/blog/assets/js/31.8d77df6b.js"><link rel="prefetch" href="/blog/assets/js/32.e3ca2e64.js"><link rel="prefetch" href="/blog/assets/js/33.01ca67e3.js"><link rel="prefetch" href="/blog/assets/js/34.e8662591.js"><link rel="prefetch" href="/blog/assets/js/35.ec168881.js"><link rel="prefetch" href="/blog/assets/js/36.0a3bff66.js"><link rel="prefetch" href="/blog/assets/js/37.978027f0.js"><link rel="prefetch" href="/blog/assets/js/4.a102d3e6.js"><link rel="prefetch" href="/blog/assets/js/5.328b3497.js"><link rel="prefetch" href="/blog/assets/js/6.ea451bbf.js"><link rel="prefetch" href="/blog/assets/js/7.7a668846.js"><link rel="prefetch" href="/blog/assets/js/8.51a5a72e.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.257c2cf1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-130b300a><div data-v-130b300a><div class="password-shadow password-wrapper-out" style="display:none;" data-v-25ba6db2 data-v-130b300a data-v-130b300a><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>kory's blog</h3> <p class="description" data-v-25ba6db2 data-v-25ba6db2>管他什么真理无穷，进一步有进一步的欣喜</p> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><span data-v-25ba6db2>kory</span>
            
          <span data-v-25ba6db2>2017 - </span>
          2023
        </a></span></div></div> <div class="hide" data-v-130b300a><header class="navbar" data-v-130b300a><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/avatar.png" alt="kory's blog" class="logo"> <span class="site-name">kory's blog</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/categories/frontEnd/" class="nav-link"><i class="undefined"></i>
  frontEnd
</a></li></ul></div></div><div class="nav-item"><a href="/blog/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/blog/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  归档
</a></div><div class="nav-item"><a href="https://github.com/korylee/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-130b300a></div> <aside class="sidebar" data-v-130b300a><div class="personal-info-wrapper" data-v-39576ba9 data-v-130b300a><img src="/blog/avatar.png" alt="author-avatar" class="personal-img" data-v-39576ba9> <h3 class="name" data-v-39576ba9>
    kory
  </h3> <div class="num" data-v-39576ba9><div data-v-39576ba9><h3 data-v-39576ba9>22</h3> <h6 data-v-39576ba9>文章</h6></div> <div data-v-39576ba9><h3 data-v-39576ba9>12</h3> <h6 data-v-39576ba9>标签</h6></div></div> <ul class="social-links" data-v-39576ba9><li class="social-item" data-v-39576ba9><i class="iconfont reco-github" style="color:#e15b64;" data-v-39576ba9></i></li></ul> <hr data-v-39576ba9></div> <nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/categories/frontEnd/" class="nav-link"><i class="undefined"></i>
  frontEnd
</a></li></ul></div></div><div class="nav-item"><a href="/blog/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/blog/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  归档
</a></div><div class="nav-item"><a href="https://github.com/korylee/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-25ba6db2 data-v-130b300a><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>构造函数</h3> <!----> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><span data-v-25ba6db2>kory</span>
            
          <span data-v-25ba6db2>2017 - </span>
          2023
        </a></span></div></div> <div data-v-130b300a><main class="page"><section><div class="page-title"><h1 class="title">构造函数</h1> <div data-v-f875f3fc><i class="iconfont reco-account" data-v-f875f3fc><span data-v-f875f3fc>kory</span></i> <i class="iconfont reco-date" data-v-f875f3fc><span data-v-f875f3fc>2020/3/26</span></i> <!----> <i class="tags iconfont reco-tag" data-v-f875f3fc><span class="tag-item" data-v-f875f3fc>JavaScript</span><span class="tag-item" data-v-f875f3fc>学习笔记</span></i></div></div> <div class="theme-reco-content content__default"><h2 id="创建对象"><a href="#创建对象" class="header-anchor">#</a> 创建对象</h2> <p>新建继承构造函数的新对象<code>this</code>会绑定到新建对象如果需要共享原型对象的<code>prototype</code>属性，不能使用<code>this</code>定义。需要用原型函数名<code>.prototype.</code>对象属性来定义，因为 this 属性指针入口已经指向了新建对象</p> <h2 id="显式原型与隐式原型"><a href="#显式原型与隐式原型" class="header-anchor">#</a> 显式原型与隐式原型</h2> <h3 id="proto-隐性原型"><a href="#proto-隐性原型" class="header-anchor">#</a> <code>__proto__</code>隐性原型</h3> <p>创建对象时自动添加的，默认值为构造函数的<code>prototype</code>属性值，所有的是<strong>实例对象</strong>都有 <code>__proto__</code> 属性，他引用了创建这个函数的<code>prototype</code>。</p> <blockquote><p>对象的隐性原型的值为其对应的构造函数的显性原型的值</p></blockquote> <h3 id="prototype显式原型"><a href="#prototype显式原型" class="header-anchor">#</a> <code>prototype</code>显式原型</h3> <p>当使用 new 方法调用该构造函数的时候，它默认指向一个<code>Object</code>空（原型）对象（没有我们的属性），它被用于构建新对象的 <code>__proto__</code>。另外它不可写，不可枚举，不可配置。程序员可以操作显式原型，但是不能直接操作隐式原型</p> <p>原型对象之所以特殊，是因为它拥有一个普通对象没有的能力：将它的属性共享给其他对象。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//内部语句:this.prototype = {}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 每个函数function都有一个prototype,即显式原型属性,默认指向一个空的Object对象</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Fn</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> fn <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//内部语句:this.__proto__ = Fn.prototype</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Fn</span><span class="token punctuation">.</span>prototype <span class="token operator">===</span> fn<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="关于prototype中的constructor属性"><a href="#关于prototype中的constructor属性" class="header-anchor">#</a> 关于<code>prototype</code>中的<code>constructor</code>属性</h3> <p><code>constructor</code>是函数原型的一个属性, 指向构造函数(类)本身</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">Foo</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Foo<span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
a<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Foo<span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><div class="custom-block warning"><p class="title"></p><p>当<code>a.constructor === Foo</code>时，并不能说明 a 是由 Foo 构成的。实际上，<code>a.constructor</code>的引用是委托给了<code>Foo.prototype</code>(本身 a 是没有这个属性的),所以才会出现等价的情况。</p> <p>而对于<code>constructor</code>，他并不是什么神秘的属性，<code>Foo.prototype</code>的<code>constructor</code>属性只是 Foo 函数在声明时的默认属性，再也没什么区别了。</p></div><h2 id="原型链"><a href="#原型链" class="header-anchor">#</a> 原型链</h2> <ul><li><code>__proto__</code>用于向父级递归,因为自身含有父级的<code>__proto__</code>引用（同样也表示自身原型）</li> <li><code>prototype</code>用于表示自身原型,因为含有引用自身的<code>constructor</code>，并被自己的<code>constructor</code>所拥有</li></ul> <div class="custom-block tip"><p class="title">理解</p><p>js 通过<code>__proto__</code>进行父子继承，而<code>prototype</code>是构造器的一个属性对象，用来链接<code>__proto__</code>，实现自身原型链接。</p> <p>访问一个对象的属性时，先在这个对象自身属性中寻找，如果没有，在沿着<code>__proto__</code>这条链向上找，这就是<code>[[prototype]]</code>链(原型链)，如果找不到，最后返回<code>undefined</code>。
通过<code>__proto__.__proto__.__proto__.__proto__.constructor.prototype</code>这种链接进行链接。</p></div><p><img src="/img/proto.png" alt="原型链"></p> <div class="language-js extra-class"><pre class="language-js"><code>fn<span class="token punctuation">.</span><span class="token class-name">__proto__</span><span class="token punctuation">.</span>constructor<span class="token punctuation">.</span>prototype <span class="token operator">===</span> <span class="token class-name">Fn</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>
<span class="token comment">// fn是引用变量，Fn是构造函数对象</span>
fn<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Fn</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span> <span class="token comment">// 牢记这一点</span>
</code></pre></div><p>引用变量的隐形原型指向构造函数的显示原型，而隐性原型内的构造器引用了自身真实函数构造器</p> <h3 id="instanceof操作符到底是怎么穿梭的"><a href="#instanceof操作符到底是怎么穿梭的" class="header-anchor">#</a> <code>instanceof</code>操作符到底是怎么穿梭的</h3> <p>对于<code>A instanceof B</code>来说，它的判断规则是：沿着<code>A</code>的<code>__proto__</code>这条线来找,同时沿着 B 的<code>prototype</code>这条线来找,同时两条线能找到同一引用，即同一个对象，那么就返回<code>true</code>。如果找到终点还未重合，则返回<code>false</code>。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">var</span> f1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f1 <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f1 <span class="token keyword">instanceof</span> <span class="token class-name">fn</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><div class="custom-block theorem"><p class="title">模拟 instanceof</p><p>遍历左边变量的原型链，直到找到右边变量的 prototype，如果没有找到，返回<code>false</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">myInstanceOf</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">left<span class="token punctuation">,</span> right</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> leftValue <span class="token operator">=</span> left<span class="token punctuation">.</span>__proto__<span class="token punctuation">;</span>
  <span class="token keyword">let</span> rightValue <span class="token operator">=</span> right<span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>leftValue <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>leftValue <span class="token operator">===</span> rightValue<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    leftValue <span class="token operator">=</span> leftValue<span class="token punctuation">.</span>__proto__<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><div class="custom-block right"><p>来自 <a href="https://juejin.im/post/5e24590ef265da3e152d27bc" target="_blank" rel="noopener noreferrer">初、中级前端应该要掌握的手写代码实现<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div></div><h3 id="当我们调用new时发生了什么"><a href="#当我们调用new时发生了什么" class="header-anchor">#</a> 当我们调用<code>new</code>时发生了什么</h3> <p>在 js 中构造函数只是一些使用<code>new</code>操作符时被调用的函数，所以实际上并不存在所谓的“构造函数”，只有对于函数的“构造调用”。</p> <p>当使用<code>new</code>来调用函数时，会执行以下操作</p> <ul><li>创建一个全新的对象</li> <li>这个新对象会被执行<code>[[prototype]]</code>原型链链接 (<code>this.__proto__ = Fn.prototype</code>)</li> <li>这个新对象会绑定到函数调用的 this</li> <li>如果函数并没有返回其他对象，那么<code>new</code>表达式中的函数会自动返回这个函数</li></ul> <p>下面的例子</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">SuperType</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 定义了一个超类</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">SubType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 定义了子类1，继承了超类，无返回值</span>
  <span class="token function">SuperType</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">&quot;Cong1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">29</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">SubType2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 定义了子类2，继承了超类，返回了一个引用类型的值</span>
  <span class="token function">SuperType</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">&quot;Cong2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">29</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">SubType3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 定义了子类3，继承了超类，返回了一个值类型的值</span>
  <span class="token function">SuperType</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">&quot;Cong3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">29</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">/* 下面比较有new操作符和无new操作符调用子类的区别 */</span>
<span class="token keyword">var</span> instance1_nonew <span class="token operator">=</span> <span class="token function">SubType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>
<span class="token keyword">var</span> instance2_nonew <span class="token operator">=</span> <span class="token function">SubType2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Object {a: 3}</span>
<span class="token keyword">var</span> instance3_nonew <span class="token operator">=</span> <span class="token function">SubType3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3</span>
<span class="token keyword">var</span> instance1_hasnew <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SubType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// SubType {name: &quot;Cong1&quot;, age: 29}</span>
<span class="token keyword">var</span> instance2_hasnew <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SubType2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Object {a: 2}</span>
<span class="token keyword">var</span> instance3_hasnew <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SubType3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// SubType3 {name: &quot;Cong1&quot;, age: 29}</span>
</code></pre></div><ul><li>没有<code>new</code>操作符的语句,就像我们平时调用函数一样,得到的肯定就是函数的返回值,所以前三个<code>_nonew</code>变量就会得到图示所示的结果。</li> <li>而看到下面 3 个<code>_hasnew</code>变量，行为却有点不同，没有返回值的<code>1_hasnew</code>就直接构造了一个实例对象，而<code>2_hasnew</code>和<code>3_hasnew</code>都是有返回值的,两者的表现却不同了。</li></ul> <p>根据上面所说的原理再来分析这个过程：</p> <ol><li>首先新建一个对象 <code>var instance = {}</code></li> <li>给这个对象设置<code>[[prototype]]</code>链：<code>instance.__proto__ = SubType.prototype</code></li> <li>绑定<code>this</code>，将<code>Subtype</code>中的<code>this</code>指向<code>instance</code>，执行<code>Subtype</code>中的语句进行赋值。
<ul><li>如果只是一个引用类型（对象），那么就替换掉 instance 本身这个对象。（如：<code>instance2_hasnew</code>）</li> <li>如果是值类型,那么就直接丢弃它，返回 instance 对象本身。（如<code>instance3_hasnew</code>）</li></ul></li></ol> <h4 id="模拟new"><a href="#模拟new" class="header-anchor">#</a> 模拟<code>new</code></h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">createNew</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">Con<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  Object<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token class-name">Con</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">Con</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> result <span class="token keyword">instanceof</span> <span class="token class-name">Object</span> <span class="token operator">?</span> result <span class="token operator">:</span> obj<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="函数和对象的关系"><a href="#函数和对象的关系" class="header-anchor">#</a> 函数和对象的关系</h2> <p><img src="/img/prototype.webp" alt="红色标识为特例"></p> <ol><li>函数的显示原型指向的对象默认是空 Object 实例对象(但 Object 不满足)</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token class-name">Fn</span><span class="token punctuation">.</span>prototype <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">;</span> <span class="token comment">//false</span>
<span class="token class-name">Function</span><span class="token punctuation">.</span>prototype <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token keyword">typeof</span> Object<span class="token punctuation">;</span>
</code></pre></div><ol start="2"><li>所以函数都是 Function 的实例(包含 Function)</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>Function<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><ol start="3"><li><code>Object</code>的原型对象是原型链尽头</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><p>由以上猜测得</p> <ul><li>首先有的应该是<code>Object.prototype</code>，它是由<code>Javascript</code>引擎创造出来的。</li> <li>紧接着才有<code>Function.prototype</code>，并把它的<code>__proto__</code>连接到了 <code>Object.prototype</code></li> <li>接下来，将各种内置引用类型的构造函数的<code>__proto__</code>连接到了<code>Function.prototype</code>。</li> <li>执行<code>Function.__proto__</code>连接到<code>Function.prototype</code>的操作。</li> <li>执行<code>Object.__proto__</code>连接到<code>object.prototype</code>的操作</li> <li>最后才是对<code>Function</code>和<code>Object</code>实例的挂载</li></ul> <h2 id="继承"><a href="#继承" class="header-anchor">#</a> 继承</h2> <h3 id="寄生组合继承"><a href="#寄生组合继承" class="header-anchor">#</a> 寄生组合继承</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Super</span><span class="token punctuation">(</span><span class="token parameter">foo</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>foo <span class="token operator">=</span> foo<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">Super</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">printFoo</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">Sub</span><span class="token punctuation">(</span><span class="token parameter">bar</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>bar <span class="token operator">=</span> bar<span class="token punctuation">;</span>
  <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">Sub</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Super</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Sub</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Sub<span class="token punctuation">;</span>
</code></pre></div><h3 id="es6-版继承"><a href="#es6-版继承" class="header-anchor">#</a> ES6 版继承</h3> <div class="language-js extra-class"><pre class="language-js"><code>Class <span class="token function">Super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">foo</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>foo <span class="token operator">=</span> foo
  <span class="token punctuation">}</span>
  <span class="token function">printFoo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>foo<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
Class Sub <span class="token keyword">extends</span> <span class="token class-name">Super</span><span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">foo<span class="token punctuation">,</span>bar</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">Super</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>bar <span class="token operator">=</span> bar
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="custom-block warning"><p class="title"></p><p>详情请学习<a href="https://es6.ruanyifeng.com/#docs/class-extends" target="_blank" rel="noopener noreferrer">Class 的继承<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div><h2 id="面试题"><a href="#面试题" class="header-anchor">#</a> 面试题</h2> <blockquote><p>一道特别火的面试题</p></blockquote> <p>题目如下:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
Foo<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">Foo</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 请写出以下结果</span>
Foo<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">Foo<span class="token punctuation">.</span>getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">new</span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="回顾基础"><a href="#回顾基础" class="header-anchor">#</a> 回顾基础</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">User</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> name <span class="token operator">=</span> name<span class="token punctuation">;</span> <span class="token comment">//私有属性</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span> <span class="token comment">//公有属性</span>
  <span class="token keyword">function</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> name<span class="token punctuation">;</span> <span class="token comment">// 私有方法</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//公有方法</span>
<span class="token class-name">User</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
User<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;Kory&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 静态属性</span>
User<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span> <span class="token comment">// 静态方法</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> kory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">&quot;kory&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 实例化</span>
</code></pre></div><ol><li>调用公有方法，公有属性，我们必须先实例化对象，也就是用 new 操作符实例化对象，就可构造函数实例化对象的方法和属性，并且公有方法是不能调用私有方法和静态方法的</li> <li>静态方法和静态方法是无需实例化就可以调用</li> <li>而对象的私有方法和属性，外部是不可以访问的</li></ol> <h3 id="解答"><a href="#解答" class="header-anchor">#</a> 解答</h3> <p>第一问答案就是 2</p> <h4 id="第二问"><a href="#第二问" class="header-anchor">#</a> 第二问</h4> <p>定义函数有两种类型,函数表达式和函数声明</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// b</span>
<span class="token comment">// 函数表达式</span>
<span class="token keyword">var</span> <span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// a</span>
<span class="token comment">//函数声明</span>
<span class="token keyword">function</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// a</span>
</code></pre></div><ul><li>Javascript 解释器中存在一种变量声明被提升的机制，也就是说函数声明会被提升到作用域的最前面。</li> <li>而用函数表达式创建的函数是在运行时进行赋值，而要等到表达式赋值完成后才能调用</li></ul> <p>函数执行上下文具体参见<a href="/blog/views/2020/040301.html">执行上下文</a></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> getName<span class="token punctuation">;</span> <span class="token comment">// 表量提升,此时为undefined</span>
<span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// b 函声明数被提升到最前面了</span>
<span class="token keyword">var</span> <span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// 函数表达式此时才开始覆盖函数声明的定义</span>
<span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// a</span>
<span class="token keyword">function</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// a 此时就执行了函数表达式的值</span>
</code></pre></div><div class="custom-block tip"><p class="title"></p><p>javascript 中函数声明和函数表达式是存在区别的，<strong>函数声明</strong>在<strong>Js 解析时</strong>进行函数提升，因此在同一个作用域内，不管函数声明在哪里定义，该函数都可以进行调用。而<strong>函数表达式</strong>的值是在 JS<strong>运行时</strong>确定，并且在表达式赋值完成后，该函数才能进行调用。</p></div><p>所以第一问的答案就是 4，5 的函数声明被 4 的函数表达式覆盖了</p> <h4 id="第三问"><a href="#第三问" class="header-anchor">#</a> 第三问</h4> <p><code>Foo().getName()</code>先执行了 Foo 函数,然后调用 Foo 函数的返回值对象的<code>getName</code>属性函数。<br>
Foo 函数的第一句<code>getName = function() { alert(1) }</code>是一句函数赋值语句，注意它没有 var 声明，所以先向当前<code>Foo</code>函数作用域寻找 getName 变量，没有。再向当前函数作用域上层，即外层作用域内寻找是否含有 getName 变量，找到了，也就是第二问中的<code>alert(4)</code>函数, 将此变量的值赋值为<code>function(){ alert(1) }</code>，此处修改外层作用域的 getName 函数</p> <div class="custom-block warning"><p class="title"></p><p>此处若依然没有找到会一直向上查找 window 对象,若 window 对象中也没有 getName 属性,就在 window 对象中创建一个 getName 变量</p></div><p>Foo 函数的返回值是 this，此处的 this 指向 window 对象，所以这里相当于执行<code>window.getName()</code>，所以最终输出 1</p> <h4 id="第四问"><a href="#第四问" class="header-anchor">#</a> 第四问</h4> <p>同第三问, 答案是 1</p> <h4 id="第五问"><a href="#第五问" class="header-anchor">#</a> 第五问</h4> <p>运算符的优先级表格,参考 MDN 运算符优先级</p> <details class="custom-block details"><summary>See More</summary> <table><tbody><tr><th>优先级</th> <th>运算类型</th> <th>关联性</th> <th>运算符</th></tr> <tr><td>20</td> <td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Grouping"><code>圆括号</code></a></td> <td>n/a（不相关）</td> <td><code>( … )</code></td></tr> <tr><td rowspan="5">19</td> <td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Property_Accessors#%E7%82%B9%E7%AC%A6%E5%8F%B7%E8%A1%A8%E7%A4%BA%E6%B3%95"><code>成员访问</code></a></td> <td>从左到右</td> <td><code>… . …</code></td></tr> <tr><td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Property_Accessors#%E6%8B%AC%E5%8F%B7%E8%A1%A8%E7%A4%BA%E6%B3%95"><code>需计算的成员访问</code></a></td> <td>从左到右</td> <td><code>… [ … ]</code></td></tr> <tr><td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/new"><code>new</code></a> (带参数列表)</td> <td>n/a</td> <td><code>new … ( … )</code></td></tr> <tr><td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Functions" title="JavaScript/Reference/Operators/Special_Operators/function_call">函数调用</a></td> <td>从左到右</td> <td><code>… ( <var>… </var>)</code></td></tr> <tr><td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Optional_chaining" rel="nofollow" class="new">可选链（Optional chaining）</a></td> <td>从左到右</td> <td><code>?.</code></td></tr> <tr><td rowspan="1">18</td> <td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/new" title="JavaScript/Reference/Operators/Special_Operators/new_Operator">new</a> (无参数列表)</td> <td>从右到左</td> <td><code>new …</code></td></tr> <tr><td rowspan="2">17</td> <td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Arithmetic_Operators#Increment" title="JavaScript/Reference/Operators/Arithmetic_Operators">后置递增</a>(运算符在后)</td> <td colspan="1" rowspan="2">n/a<br>
     </td> <td><code>… ++</code></td></tr> <tr><td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Arithmetic_Operators#Decrement" title="JavaScript/Reference/Operators/Arithmetic_Operators">后置递减</a>(运算符在后)</td> <td><code>… --</code></td></tr> <tr><td colspan="1" rowspan="10">16</td> <td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Logical_Operators#Logical_NOT">逻辑非</a></td> <td colspan="1" rowspan="10">从右到左</td> <td><code>! …</code></td></tr> <tr><td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Bitwise_Operators#Bitwise_NOT" title="JavaScript/Reference/Operators/Bitwise_Operators">按位非</a></td> <td><code>~ …</code></td></tr> <tr><td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Arithmetic_Operators#Unary_plus" title="JavaScript/Reference/Operators/Arithmetic_Operators">一元加法</a></td> <td><code>+ …</code></td></tr> <tr><td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Arithmetic_Operators#Unary_negation" title="JavaScript/Reference/Operators/Arithmetic_Operators">一元减法</a></td> <td><code>- …</code></td></tr> <tr><td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Arithmetic_Operators#Increment" title="JavaScript/Reference/Operators/Arithmetic_Operators">前置递增</a></td> <td><code>++ …</code></td></tr> <tr><td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Arithmetic_Operators#Decrement" title="JavaScript/Reference/Operators/Arithmetic_Operators">前置递减</a></td> <td><code>-- …</code></td></tr> <tr><td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/typeof" title="JavaScript/Reference/Operators/Special_Operators/typeof_Operator">typeof</a></td> <td><code>typeof …</code></td></tr> <tr><td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/void" title="JavaScript/Reference/Operators/Special_Operators/void_Operator">void</a></td> <td><code>void …</code></td></tr> <tr><td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/delete" title="JavaScript/Reference/Operators/Special_Operators/delete_Operator">delete</a></td> <td><code>delete …</code></td></tr> <tr><td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await">await</a></td> <td><code>await …</code></td></tr> <tr><td>15</td> <td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Arithmetic_Operators#Exponentiation" title="JavaScript/Reference/Operators/Arithmetic_Operators">幂</a></td> <td>从右到左</td> <td><code>… ** …</code></td></tr> <tr><td rowspan="3">14</td> <td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Arithmetic_Operators#Multiplication" title="JavaScript/Reference/Operators/Arithmetic_Operators">乘法</a></td> <td colspan="1" rowspan="3">从左到右<br>
     </td> <td><code>… * …</code></td></tr> <tr><td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Arithmetic_Operators#Division" title="JavaScript/Reference/Operators/Arithmetic_Operators">除法</a></td> <td><code>… / …</code></td></tr> <tr><td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Arithmetic_Operators#Remainder" title="JavaScript/Reference/Operators/Arithmetic_Operators">取模</a></td> <td><code>… % …</code></td></tr> <tr><td rowspan="2">13</td> <td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Arithmetic_Operators#Addition" title="JavaScript/Reference/Operators/Arithmetic_Operators">加法</a></td> <td colspan="1" rowspan="2">从左到右<br>
     </td> <td><code>… + …</code></td></tr> <tr><td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Arithmetic_Operators#Subtraction" title="JavaScript/Reference/Operators/Arithmetic_Operators">减法</a></td> <td><code>… - …</code></td></tr> <tr><td rowspan="3">12</td> <td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Bitwise_Operators" title="JavaScript/Reference/Operators/Bitwise_Operators">按位左移</a></td> <td colspan="1" rowspan="3">从左到右</td> <td><code>… &lt;&lt; …</code></td></tr> <tr><td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Bitwise_Operators" title="JavaScript/Reference/Operators/Bitwise_Operators">按位右移</a></td> <td><code>… &gt;&gt; …</code></td></tr> <tr><td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Bitwise_Operators" title="JavaScript/Reference/Operators/Bitwise_Operators">无符号右移</a></td> <td><code>… &gt;&gt;&gt; …</code></td></tr> <tr><td rowspan="6">11</td> <td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Comparison_Operators#Less_than_operator" title="JavaScript/Reference/Operators/Comparison_Operators">小于</a></td> <td colspan="1" rowspan="6">从左到右</td> <td><code>… &lt; …</code></td></tr> <tr><td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Comparison_Operators#Less_than__or_equal_operator" title="JavaScript/Reference/Operators/Comparison_Operators">小于等于</a></td> <td><code>… &lt;= …</code></td></tr> <tr><td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Comparison_Operators#Greater_than_operator" title="JavaScript/Reference/Operators/Comparison_Operators">大于</a></td> <td><code>… &gt; …</code></td></tr> <tr><td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Comparison_Operators#Greater_than_or_equal_operator" title="JavaScript/Reference/Operators/Comparison_Operators">大于等于</a></td> <td><code>… &gt;= …</code></td></tr> <tr><td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/in" title="JavaScript/Reference/Operators/Special_Operators/in_Operator">in</a></td> <td><code>… in …</code></td></tr> <tr><td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/instanceof" title="JavaScript/Reference/Operators/Special_Operators/instanceof_Operator">instanceof</a></td> <td><code>… instanceof …</code></td></tr> <tr><td rowspan="4">10</td> <td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Comparison_Operators#Equality" title="JavaScript/Reference/Operators/Comparison_Operators">等号</a></td> <td colspan="1" rowspan="4">从左到右<br>
     </td> <td><code>… == …</code></td></tr> <tr><td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Comparison_Operators#Inequality" title="JavaScript/Reference/Operators/Comparison_Operators">非等号</a></td> <td><code>… != …</code></td></tr> <tr><td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Comparison_Operators#Identity" title="JavaScript/Reference/Operators/Comparison_Operators">全等号</a></td> <td><code>… === …</code></td></tr> <tr><td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Comparison_Operators#Nonidentity" title="JavaScript/Reference/Operators/Comparison_Operators">非全等号</a></td> <td><code>… !== …</code></td></tr> <tr><td>9</td> <td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Bitwise_Operators#Bitwise_AND" title="JavaScript/Reference/Operators/Bitwise_Operators">按位与</a></td> <td>从左到右</td> <td><code>… &amp; …</code></td></tr> <tr><td>8</td> <td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Bitwise_Operators#Bitwise_XOR" title="JavaScript/Reference/Operators/Bitwise_Operators">按位异或</a></td> <td>从左到右</td> <td><code>… ^ …</code></td></tr> <tr><td>7</td> <td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Bitwise_Operators#Bitwise_OR" title="JavaScript/Reference/Operators/Bitwise_Operators">按位或</a></td> <td>从左到右</td> <td><code>… | …</code></td></tr> <tr><td>6</td> <td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Logical_Operators#Logical_AND" title="JavaScript/Reference/Operators/Logical_Operators">逻辑与</a></td> <td>从左到右</td> <td><code>… &amp;&amp; …</code></td></tr> <tr><td>5</td> <td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Logical_Operators#Logical_OR" title="JavaScript/Reference/Operators/Logical_Operators">逻辑或</a></td> <td>从左到右</td> <td><code>… || …</code></td></tr> <tr><td>4</td> <td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Conditional_Operator" title="JavaScript/Reference/Operators/Special_Operators/Conditional_Operator">条件运算符</a></td> <td>从右到左</td> <td><code>… ? … : …</code></td></tr> <tr><td rowspan="12">3</td> <td rowspan="12"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Assignment_Operators" title="JavaScript/Reference/Operators/Assignment_Operators">赋值</a></td> <td rowspan="12">从右到左</td> <td><code>… = …</code></td></tr> <tr><td><code>… += …</code></td></tr> <tr><td><code>… -= …</code></td></tr> <tr><td><code>… *= …</code></td></tr> <tr><td><code>… /= …</code></td></tr> <tr><td><code>… %= …</code></td></tr> <tr><td><code>… &lt;&lt;= …</code></td></tr> <tr><td><code>… &gt;&gt;= …</code></td></tr> <tr><td><code>… &gt;&gt;&gt;= …</code></td></tr> <tr><td><code>… &amp;= …</code></td></tr> <tr><td><code>… ^= …</code></td></tr> <tr><td><code>… |= …</code></td></tr> <tr><td colspan="1" rowspan="2">2</td> <td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/yield" title="JavaScript/Reference/Operators/yield">yield</a></td> <td colspan="1" rowspan="2">从右到左</td> <td><code>yield …</code></td></tr> <tr><td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/yield*" title="JavaScript/Reference/Operators/yield">yield*</a></td> <td><code>yield* …</code></td></tr> <tr><td>1</td> <td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Spread_operator" title="JavaScript/Reference/Operators/Spread_operator">展开运算符</a></td> <td>n/a</td> <td><code>...</code> …</td></tr> <tr><td>0</td> <td><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Comma_Operator" title="JavaScript/Reference/Operators/Comma_Operator">逗号</a></td> <td>从左到右</td> <td><code>… , …</code></td></tr></tbody></table></details> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">Foo<span class="token punctuation">.</span>getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span><span class="token operator">&gt;</span> <span class="token keyword">new</span><span class="token punctuation">(</span>Foo<span class="token punctuation">.</span>getName<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><ol><li>点的优先级(18)new 无参数列表(17)优先级高</li> <li>函数调用(17)比 new 有参数列表优先级低
所以这里实际上将 getName 函数作为了构造函数来执行,遂弹出 2</li></ol> <h4 id="第六问"><a href="#第六问" class="header-anchor">#</a> 第六问</h4> <p>首先 new 有参数列表(18)跟点的优先级(18)同级, 同级的话按照从左到右的执行顺序。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><div class="custom-block tip"><p class="title"></p><p>new 参数列表(18) =&gt; 成员访问(18) =&gt; 函数调用(17)</p></div><p>原题中由于返回值是 this，则 Foo 函数返回实例化对象
之后调用实例化对象的<code>getName</code>函数,因为 Foo 构造函数中没有为实例化对象添加任何属性，则在当前对象的原型对象（prototype）中寻找<code>getName</code>函数</p> <div class="custom-block tip"><p class="title"></p><p>当然这里扩展一个题外话，如果构造函数和原型链都有相同的方法,如以下的代码，那么会默认拿构造函数的公有方法而不是原型链。</p></div><p>看下面的代码:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">Foo</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;one&quot;</span><span class="token punctuation">;</span>
<span class="token class-name">Foo</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">&quot;one&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token string">&quot;two&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// two</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token string">&quot;two&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// two</span>
</code></pre></div><h4 id="第七问"><a href="#第七问" class="header-anchor">#</a> 第七问</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">new</span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span><span class="token operator">&gt;</span> <span class="token keyword">new</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>getName<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><div class="custom-block tip"><p class="title">优先级</p><p>new 有参数列表(19) -&gt; new 有参数列表(19)</p></div><p>也就是说:先初始化 Foo 的实例对象，然后将其原型上的 getName 函数作为构造函数再次 new，所以最终结果为 3</p> <h2 id="答案补充"><a href="#答案补充" class="header-anchor">#</a> 答案补充</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      getName<span class="token punctuation">,</span> <span class="token comment">// 第六问中涉及的构造函数的返回值问题</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">//这个就是第六问涉及到的，JS构造函数公有方法和原型链方法的优先级</span>
  <span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
Foo<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">Foo</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
Foo<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
<span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 4</span>
<span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
<span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
<span class="token keyword">new</span> <span class="token class-name">Foo<span class="token punctuation">.</span>getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
<span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3</span>
<span class="token comment">// 补充</span>
<span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3 1</span>
<span class="token keyword">new</span> <span class="token class-name">new</span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//3</span>
</code></pre></div></div></section> <footer class="page-edit"><!----> <!----></footer> <!----> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-cb1513f6><li class="level-2" data-v-cb1513f6><a href="/blog/views/2020/constructor.html#创建对象" class="sidebar-link reco-side-创建对象" data-v-cb1513f6>创建对象</a></li><li class="level-2" data-v-cb1513f6><a href="/blog/views/2020/constructor.html#显式原型与隐式原型" class="sidebar-link reco-side-显式原型与隐式原型" data-v-cb1513f6>显式原型与隐式原型</a></li><li class="level-3" data-v-cb1513f6><a href="/blog/views/2020/constructor.html#proto-隐性原型" class="sidebar-link reco-side-proto-隐性原型" data-v-cb1513f6>__proto__隐性原型</a></li><li class="level-3" data-v-cb1513f6><a href="/blog/views/2020/constructor.html#prototype显式原型" class="sidebar-link reco-side-prototype显式原型" data-v-cb1513f6>prototype显式原型</a></li><li class="level-3" data-v-cb1513f6><a href="/blog/views/2020/constructor.html#关于prototype中的constructor属性" class="sidebar-link reco-side-关于prototype中的constructor属性" data-v-cb1513f6>关于prototype中的constructor属性</a></li><li class="level-2" data-v-cb1513f6><a href="/blog/views/2020/constructor.html#原型链" class="sidebar-link reco-side-原型链" data-v-cb1513f6>原型链</a></li><li class="level-3" data-v-cb1513f6><a href="/blog/views/2020/constructor.html#instanceof操作符到底是怎么穿梭的" class="sidebar-link reco-side-instanceof操作符到底是怎么穿梭的" data-v-cb1513f6>instanceof操作符到底是怎么穿梭的</a></li><li class="level-3" data-v-cb1513f6><a href="/blog/views/2020/constructor.html#当我们调用new时发生了什么" class="sidebar-link reco-side-当我们调用new时发生了什么" data-v-cb1513f6>当我们调用new时发生了什么</a></li><li class="level-2" data-v-cb1513f6><a href="/blog/views/2020/constructor.html#函数和对象的关系" class="sidebar-link reco-side-函数和对象的关系" data-v-cb1513f6>函数和对象的关系</a></li><li class="level-2" data-v-cb1513f6><a href="/blog/views/2020/constructor.html#继承" class="sidebar-link reco-side-继承" data-v-cb1513f6>继承</a></li><li class="level-3" data-v-cb1513f6><a href="/blog/views/2020/constructor.html#寄生组合继承" class="sidebar-link reco-side-寄生组合继承" data-v-cb1513f6>寄生组合继承</a></li><li class="level-3" data-v-cb1513f6><a href="/blog/views/2020/constructor.html#es6-版继承" class="sidebar-link reco-side-es6-版继承" data-v-cb1513f6>ES6 版继承</a></li><li class="level-2" data-v-cb1513f6><a href="/blog/views/2020/constructor.html#面试题" class="sidebar-link reco-side-面试题" data-v-cb1513f6>面试题</a></li><li class="level-3" data-v-cb1513f6><a href="/blog/views/2020/constructor.html#回顾基础" class="sidebar-link reco-side-回顾基础" data-v-cb1513f6>回顾基础</a></li><li class="level-3" data-v-cb1513f6><a href="/blog/views/2020/constructor.html#解答" class="sidebar-link reco-side-解答" data-v-cb1513f6>解答</a></li><li class="level-2" data-v-cb1513f6><a href="/blog/views/2020/constructor.html#答案补充" class="sidebar-link reco-side-答案补充" data-v-cb1513f6>答案补充</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><!----></div></div>
    <script src="/blog/assets/js/app.78442544.js" defer></script><script src="/blog/assets/js/3.0ac8ca5b.js" defer></script><script src="/blog/assets/js/1.1171ce4e.js" defer></script><script src="/blog/assets/js/14.3b271529.js" defer></script><script src="/blog/assets/js/9.259b0972.js" defer></script>
  </body>
</html>
