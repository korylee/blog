<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>TypeScript指南 | kory&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/blog/favicon.ico">
    <meta name="description" content="记录，成为更好的自己。">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/blog/assets/css/0.styles.e5d14f25.css" as="style"><link rel="preload" href="/blog/assets/js/app.1bc9607c.js" as="script"><link rel="preload" href="/blog/assets/js/3.434a33f8.js" as="script"><link rel="preload" href="/blog/assets/js/1.32e05f2b.js" as="script"><link rel="preload" href="/blog/assets/js/20.379b0629.js" as="script"><link rel="preload" href="/blog/assets/js/9.dae10805.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.8d183476.js"><link rel="prefetch" href="/blog/assets/js/11.329a7d0f.js"><link rel="prefetch" href="/blog/assets/js/12.4d56c898.js"><link rel="prefetch" href="/blog/assets/js/13.0c15316b.js"><link rel="prefetch" href="/blog/assets/js/14.f341845e.js"><link rel="prefetch" href="/blog/assets/js/15.7b10223c.js"><link rel="prefetch" href="/blog/assets/js/16.aaf0a2b1.js"><link rel="prefetch" href="/blog/assets/js/17.3df63ac4.js"><link rel="prefetch" href="/blog/assets/js/18.6d977263.js"><link rel="prefetch" href="/blog/assets/js/19.30610909.js"><link rel="prefetch" href="/blog/assets/js/21.2733e991.js"><link rel="prefetch" href="/blog/assets/js/22.3e353341.js"><link rel="prefetch" href="/blog/assets/js/23.e5620d49.js"><link rel="prefetch" href="/blog/assets/js/24.d8595f7d.js"><link rel="prefetch" href="/blog/assets/js/25.7095d50e.js"><link rel="prefetch" href="/blog/assets/js/26.be66be2c.js"><link rel="prefetch" href="/blog/assets/js/27.de0e3c71.js"><link rel="prefetch" href="/blog/assets/js/28.e18cbe25.js"><link rel="prefetch" href="/blog/assets/js/29.ed012321.js"><link rel="prefetch" href="/blog/assets/js/30.533ee78c.js"><link rel="prefetch" href="/blog/assets/js/31.76996670.js"><link rel="prefetch" href="/blog/assets/js/32.617ee5b4.js"><link rel="prefetch" href="/blog/assets/js/33.585cf783.js"><link rel="prefetch" href="/blog/assets/js/34.5ca815fd.js"><link rel="prefetch" href="/blog/assets/js/35.c661472c.js"><link rel="prefetch" href="/blog/assets/js/36.538b2b41.js"><link rel="prefetch" href="/blog/assets/js/37.d25c3793.js"><link rel="prefetch" href="/blog/assets/js/4.f8a03f16.js"><link rel="prefetch" href="/blog/assets/js/5.97e22675.js"><link rel="prefetch" href="/blog/assets/js/6.66819944.js"><link rel="prefetch" href="/blog/assets/js/7.1f8ac238.js"><link rel="prefetch" href="/blog/assets/js/8.2de49000.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.e5d14f25.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-1aefc0b4><div data-v-1aefc0b4><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-1aefc0b4 data-v-1aefc0b4><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-25ba6db2 data-v-1aefc0b4 data-v-1aefc0b4><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>kory's blog</h3> <p class="description" data-v-25ba6db2 data-v-25ba6db2>记录，成为更好的自己。</p> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><span data-v-25ba6db2>kory</span>
            
          <span data-v-25ba6db2>2017 - </span>
          2022
        </a></span></div></div> <div class="hide" data-v-1aefc0b4><header class="navbar" data-v-1aefc0b4><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/avatar.png" alt="kory's blog" class="logo"> <span class="site-name">kory's blog</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/categories/frontEnd/" class="nav-link"><i class="undefined"></i>
  frontEnd
</a></li></ul></div></div><div class="nav-item"><a href="/blog/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/blog/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  归档
</a></div><div class="nav-item"><a href="https://github.com/korylee/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-1aefc0b4></div> <aside class="sidebar" data-v-1aefc0b4><div class="personal-info-wrapper" data-v-39576ba9 data-v-1aefc0b4><img src="/blog/avatar.png" alt="author-avatar" class="personal-img" data-v-39576ba9> <h3 class="name" data-v-39576ba9>
    kory
  </h3> <div class="num" data-v-39576ba9><div data-v-39576ba9><h3 data-v-39576ba9>22</h3> <h6 data-v-39576ba9>文章</h6></div> <div data-v-39576ba9><h3 data-v-39576ba9>11</h3> <h6 data-v-39576ba9>标签</h6></div></div> <ul class="social-links" data-v-39576ba9><li class="social-item" data-v-39576ba9><i class="iconfont reco-github" style="color:#f26d6d;" data-v-39576ba9></i></li></ul> <hr data-v-39576ba9></div> <nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/categories/frontEnd/" class="nav-link"><i class="undefined"></i>
  frontEnd
</a></li></ul></div></div><div class="nav-item"><a href="/blog/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/blog/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  归档
</a></div><div class="nav-item"><a href="https://github.com/korylee/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-25ba6db2 data-v-1aefc0b4><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>TypeScript指南</h3> <!----> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><span data-v-25ba6db2>kory</span>
            
          <span data-v-25ba6db2>2017 - </span>
          2022
        </a></span></div></div> <div data-v-1aefc0b4><main class="page"><section><div class="page-title"><h1 class="title">TypeScript指南</h1> <div data-v-f875f3fc><i class="iconfont reco-account" data-v-f875f3fc><span data-v-f875f3fc>kory</span></i> <i class="iconfont reco-date" data-v-f875f3fc><span data-v-f875f3fc>2020/11/8</span></i> <!----> <i class="tags iconfont reco-tag" data-v-f875f3fc><span class="tag-item" data-v-f875f3fc>TypeScript</span></i></div></div> <div class="theme-reco-content content__default"><h2 id="_1-typescript-优势"><a href="#_1-typescript-优势" class="header-anchor">#</a> 1. TypeScript 优势</h2> <ul><li>Javascript 的超集，完美兼容 js
<ul><li>从核心语法方面和类概念方面对 JavaScript 对象模型进行扩展</li> <li>扩展了 js 的语法，相较于 ES6，他多了装饰器、私有属性、<code>getter</code>/<code>setter</code>、抽象类</li></ul></li> <li>强类型语言（最重要的特性之一）已于重构和理解
<ul><li>类型系统</li> <li>编译时的静态类型检查</li></ul></li> <li>强大的 IDE 支持，VSCode 前端必备</li></ul> <h2 id="基础类型"><a href="#基础类型" class="header-anchor">#</a> 基础类型</h2> <h3 id="any-和-unknown的区别"><a href="#any-和-unknown的区别" class="header-anchor">#</a> <code>any</code> 和 <code>unknown</code>的区别</h3> <ul><li><code>any</code>:任意类型</li> <li><code>unknown</code>:未知的类型</li></ul> <p>任何类型都能分配给<code>unknown</code>，但<code>unknown</code>不能分配给其他基本类型, 而<code>any</code>啥都能分配和被分配。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> foo<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">;</span>

foo <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
foo <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>

foo<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// error</span>
<span class="token keyword">let</span> foo1<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> foo<span class="token punctuation">;</span> <span class="token comment">// error</span>
</code></pre></div><h3 id="unknown-的正确用法"><a href="#unknown-的正确用法" class="header-anchor">#</a> unknown 的正确用法</h3> <p>我可以用不同的方式将<code>unknown</code>类型缩小为更具体的类型范围：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">getLen</span><span class="token punctuation">(</span>val<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> value <span class="token operator">===</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">)</span> <span class="token keyword">return</span> value<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>这个过程就是类型收窄（type narrowing）</p></blockquote> <h3 id="never"><a href="#never" class="header-anchor">#</a> never</h3> <p><code>never</code>一般表示无法达到的类型。在新的 typescript3.7 中，下面的代码会报错</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">//never 用户控制流分析</span>
<span class="token keyword">function</span> <span class="token function">neverReach</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">never</span> <span class="token punctuation">{</span>
  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;an error&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> x <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token function">neverReach</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

x<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// x is unreachable</span>
</code></pre></div><p><code>never</code>还可以由于联合类型的<strong>幺元</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">To</span> <span class="token operator">=</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">never</span><span class="token punctuation">;</span> <span class="token comment">// To is string | number</span>
</code></pre></div><h2 id="类型兼容性"><a href="#类型兼容性" class="header-anchor">#</a> 类型兼容性</h2> <p>typescript 的子类型是基于<code>结构子类型</code>的,只要结构兼容,就是子类型(duck type)</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">class</span> <span class="token class-name">Point</span> <span class="token punctuation">{</span>
  x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">getPointX</span><span class="token punctuation">(</span>point<span class="token operator">:</span> Point<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> point<span class="token punctuation">.</span>x<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Point2</span> <span class="token punctuation">{</span>
  x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> point2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Point2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">getPointX</span><span class="token punctuation">(</span>point2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="对象子类型"><a href="#对象子类型" class="header-anchor">#</a> 对象子类型</h3> <p>子类型中必须包含原类型所有的数学和方法</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">getPointX</span><span class="token punctuation">(</span>point<span class="token operator">:</span> <span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> point<span class="token punctuation">.</span>x<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> point <span class="token operator">=</span> <span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token string">&quot;2&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">getPointX</span><span class="token punctuation">(</span>point<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// OK</span>
</code></pre></div><div class="custom-block warning"><p class="title"></p><p>如果直接传入一个对象字面量是会报错的:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">getPointX</span><span class="token punctuation">(</span>point<span class="token operator">:</span> <span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> point<span class="token punctuation">.</span>x<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">getPointX</span><span class="token punctuation">(</span><span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token string">&quot;2&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>这里 ts 中的另一个特性,叫做<code>excess property check</code>, 当传入的参数是一个对象字面量时,会进行<strong>额外属性检查</strong>。</p></div><h3 id="函数子类型"><a href="#函数子类型" class="header-anchor">#</a> 函数子类型</h3> <p>介绍函数子类型前先介绍一下<strong>逆变</strong>与协变的概念，<strong>逆变</strong>与<strong>协变</strong>并不是 TS 中独有的概念，在其他的静态语言中也有相关理念</p> <p>在介绍之前，先假设一个问题，约定如下标记</p> <ul><li><code>A ≼ B</code> 表示 A 是 B 的子类型， A 包含 B 的所有属性和方法</li> <li><code>A =&gt; B</code> 表示以 A 为参数，B 为返回值的方法。<code>(param: A) =&gt; B</code></li></ul> <p>如果我们现在有两个类型<code>Animal</code>、<code>Dog</code>、<code>WangCai</code>,那么肯定存在下面的关系</p> <div class="language- extra-class"><pre class="language-text"><code>Wang ≼ Dog ≼ Animal // 即旺财属于狗属于动物
</code></pre></div><p><strong>问题</strong>： 以下哪种类型是<code>Dog =&gt; Dog</code>的子类呢？</p> <ul><li><code>WangCai =&gt; WangCai</code></li> <li><code>WangCai =&gt; Animal</code></li> <li><code>Animal =&gt; Animal</code></li> <li><code>Animal =&gt; WangCai</code> <strong>从代码来看解答</strong></li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  sleep<span class="token operator">:</span> <span class="token builtin">Function</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  bark<span class="token operator">:</span> <span class="token builtin">Function</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">WangCai</span> <span class="token keyword">extends</span> <span class="token class-name">Dog</span> <span class="token punctuation">{</span>
  dance<span class="token operator">:</span> <span class="token builtin">Function</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">getDogName</span><span class="token punctuation">(</span><span class="token function-variable function">cb</span><span class="token operator">:</span> <span class="token punctuation">(</span>dog<span class="token operator">:</span> Dog<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Dog<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> dog <span class="token operator">=</span> <span class="token function">cb</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  dog<span class="token punctuation">.</span><span class="token function">bark</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 对于入参来说，WangCai是Dog的子类，Dog类上没有dance方法，产生异常</span>
<span class="token comment">// 对于出参来说，WangCai类继承了Dog类，肯定会有bark方法</span>
<span class="token function">getDogName</span><span class="token punctuation">(</span><span class="token punctuation">(</span>wangcai<span class="token operator">:</span> WangCai<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  wangcai<span class="token punctuation">.</span><span class="token function">dance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 对于入参来说，Animal类是Dog的父类，Dog类肯定有sleep方法</span>
<span class="token comment">// 对于出参来说，Animal类上没有bark方法，产生异常</span>
<span class="token function">getDogName</span><span class="token punctuation">(</span><span class="token punctuation">(</span>wangcai<span class="token operator">:</span> WangCai<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  wangcai<span class="token punctuation">.</span><span class="token function">dance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 对于入参来说，Animal 类是 Dog 的父类，Dog 类肯定有 sleep 方法。</span>
<span class="token comment">// 对于出参来说，WangCai 类继承了 Dog 类，肯定会有 bark 方法</span>
<span class="token function">getDogName</span><span class="token punctuation">(</span><span class="token punctuation">(</span>animal<span class="token operator">:</span> Animal<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  animal<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">WangCai</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 对于入参来说，Animal 类是 Dog 的父类，Dog 类肯定有 sleep 方法。</span>
<span class="token comment">// 对于出参来说，Animal 类上没有 bark 方法, 产生异常。</span>
<span class="token function">getDogName</span><span class="token punctuation">(</span><span class="token punctuation">(</span>animal<span class="token operator">:</span> Animal<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  animal<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>可以看到只有<code>Animal =&gt; WangCai</code>才是<code>Dog =&gt; Dog</code>的子类型，可以得到一个结论，对于函数类型来说，函数参数的类型的兼容是相反的，我们称之为<code>逆变</code>，返回值的类型兼容是正向的，称之为<code>协变</code>。</p> <p>协变与逆变的例子只说明了函数参数只有一个时的情况,如果函数参数有多个时该如何区分?</p> <p>其实函数的参数可以转化为<code>Tuple</code>的类型兼容性</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Tuple1</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">Tuple2</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">boolean</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> tuple1<span class="token operator">:</span> Tuple1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> tuple2<span class="token operator">:</span> Tuple2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> t1<span class="token operator">:</span> Tuple1 <span class="token operator">=</span> tuple2<span class="token punctuation">;</span> <span class="token comment">//ok</span>
<span class="token keyword">let</span> t2<span class="token operator">:</span> Tuple2 <span class="token operator">=</span> tuple1<span class="token punctuation">;</span> <span class="token comment">//error</span>
</code></pre></div><p>可以看到<code>Tuple1 =&gt; Tuple2</code>,即长度大的时长度小的子类型,再由于函数参数的逆变特性,所以函数参数少的可以赋值给参数多的(参数从前往后需一一对应),从数组的 forEach 方法就可以看出来</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> index<span class="token punctuation">,</span> arr<span class="token punctuation">,</span> other<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="高级类型"><a href="#高级类型" class="header-anchor">#</a> 高级类型</h2> <h3 id="联合类型和交叉类型"><a href="#联合类型和交叉类型" class="header-anchor">#</a> 联合类型和交叉类型</h3> <p>联合类型(union type) 表示多种类型的&quot;或&quot;关系</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">genLen</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>交叉类型表示多种类型的&quot;与&quot;关系</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  color<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> x<span class="token operator">:</span> Person <span class="token operator">&amp;</span> Animal <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&quot;x&quot;</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  color<span class="token operator">:</span> <span class="token string">&quot;red&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>在 JavaScript 中,<code>extends</code>是一种非常常见的模式,在这种模式中,你可以从两个对象中创建一个新对象,新对象拥有着两个对象的所有功能。</p> <p>交叉类型可以让你安全的使用此种模式：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">extend</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> object<span class="token punctuation">,</span> <span class="token constant">U</span> <span class="token keyword">extends</span> object<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>
  first<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span>
  second<span class="token operator">:</span> <span class="token constant">U</span>
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span> <span class="token operator">&amp;</span> <span class="token constant">U</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token operator">&amp;</span> <span class="token constant">U</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> id <span class="token keyword">in</span> first<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span>result<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=</span> first<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> id <span class="token keyword">in</span> second<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>result<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token constant">U</span><span class="token operator">&gt;</span>result<span class="token punctuation">)</span><span class="token punctuation">[</span>id<span class="token punctuation">]</span> <span class="token operator">=</span> second<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> x <span class="token operator">=</span> <span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token string">&quot;hello&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> b<span class="token operator">:</span> <span class="token number">42</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> a <span class="token operator">=</span> x<span class="token punctuation">.</span>a<span class="token punctuation">;</span>
<span class="token keyword">const</span> b <span class="token operator">=</span> x<span class="token punctuation">.</span>b<span class="token punctuation">;</span>
</code></pre></div><h4 id="使用联合类型表示枚举"><a href="#使用联合类型表示枚举" class="header-anchor">#</a> 使用联合类型表示枚举</h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Position</span> <span class="token operator">=</span> <span class="token string">&quot;UP&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;DOWN&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;LEFT&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> position<span class="token operator">:</span> Position <span class="token operator">=</span> <span class="token string">&quot;UP&quot;</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>可以避免 enumerate 入侵了运行时</p></blockquote> <h3 id="类型保护"><a href="#类型保护" class="header-anchor">#</a> 类型保护</h3> <p>ts 初学者很容易写出下面的代码:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">isString</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> Object<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'[object String]'</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span>x<span class="token operator">:</span><span class="token builtin">string</span><span class="token operator">|</span><span class="token builtin">number</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isString</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> x<span class="token punctuation">.</span>length <span class="token comment">//error 类型string|number 上不存在属性&quot;length&quot;</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>如何让 ts 判断出上下文的类型呢</p> <ol><li>使用 ts 的<code>is</code>关键词</li></ol> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">isString</span><span class="token punctuation">(</span>value<span class="token operator">:</span><span class="token builtin">unknown</span><span class="token punctuation">)</span> <span class="token operator">:</span>value <span class="token keyword">is</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Object<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'[object String]'</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li><p>typeof 关键词
在 ts 中,<strong>代码实现</strong>中的 typeof 关键词能够帮助 ts 判断出变量的基本类型</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> x <span class="token operator">===</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">)</span> <span class="token keyword">return</span> x<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>instanceof 关键词
在 ts 中, instanceof 关键词能够帮助 ts 判断出构造函数的类型</p></li> <li><p>针对 null 和 undefined 的类型保护
在条件判断时,ts 会自动对 null 和 undefined 进行类型保护</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span>x<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token keyword">return</span> x<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>针对 null 和 undefined 的类型断言
如果当已经知道的参数不为空,可以用<code>!</code>来手动标记</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span>x<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x<span class="token operator">!</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ol> <h3 id="typeof-关键词"><a href="#typeof-关键词" class="header-anchor">#</a> typeof 关键词</h3> <p><code>typeof</code> 关键词除了做类型保护,还可以从<strong>实现</strong>推出<strong>类型</strong>。</p> <div class="custom-block warning"><p class="title">注意</p><p>此时的 <code>typeof</code>是一个类型关键词,只可以用在类型语法中</p></div><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token string">&quot;2&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T0</span></span> <span class="token operator">=</span> <span class="token keyword">typeof</span> fn<span class="token punctuation">;</span> <span class="token comment">//(x:string) =&gt; number</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T1</span></span> <span class="token operator">=</span> <span class="token keyword">typeof</span> obj<span class="token punctuation">;</span> <span class="token comment">// {x:number, y: string}</span>
</code></pre></div><h3 id="keyof-关键词"><a href="#keyof-关键词" class="header-anchor">#</a> keyof 关键词</h3> <p><code>keyof</code>也是一个<strong>类型关键词</strong>, 可以用来区的一个对象接口的所有的<code>key</code>值:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">PersonAttrs</span> <span class="token operator">=</span> <span class="token keyword">keyof</span> Person<span class="token punctuation">;</span> <span class="token comment">// 'name'| 'age'</span>
</code></pre></div><h3 id="in-关键词"><a href="#in-关键词" class="header-anchor">#</a> in 关键词</h3> <p><code>in</code>也是一个<strong>类型关键词</strong>, 可以对联合类型进行遍历,也可以只用在<code>type</code>关键字下面。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Person</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span>key <span class="token keyword">in</span> <span class="token string">&quot;name&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;age&quot;</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// {name:number, age:number}</span>
</code></pre></div><h3 id="操作符"><a href="#操作符" class="header-anchor">#</a> <code>[]</code>操作符</h3> <p>使用<code>[]</code>操作符可以进行索引访问， 也是一个<strong>类型关键词</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">x</span> <span class="token operator">=</span> Person<span class="token punctuation">[</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// x is string</span>
</code></pre></div><h3 id="小栗子"><a href="#小栗子" class="header-anchor">#</a> 小栗子</h3> <p>写一个类型复制的类型工具</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Copy<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>key <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">Person1</span> <span class="token operator">=</span> Copy<span class="token operator">&lt;</span>Person<span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="泛型"><a href="#泛型" class="header-anchor">#</a> 泛型</h2> <p>泛型相当于一个类型的参数,在 ts 中,泛型可以用在<code>类</code>、<code>接口</code>、<code>方法</code>、<code>类型</code>别名等实体中</p> <h3 id="小试牛刀"><a href="#小试牛刀" class="header-anchor">#</a> 小试牛刀</h3> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">createList</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">as</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>有了泛型的支持,createList 方法可以传入一个类型,返回有类型的数组,而不是一个 any[]</p></blockquote> <h3 id="泛型约束"><a href="#泛型约束" class="header-anchor">#</a> 泛型约束</h3> <p>如果我们希望 createList 函数只能生成指定的类型数组,可以使用<code>extends</code>关键词来约束泛型的范围和形状</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Lengthwise</span> <span class="token operator">=</span> <span class="token punctuation">{</span> length<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">createList</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">number</span> <span class="token operator">|</span> Lengthwise<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">as</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> numberList <span class="token operator">=</span> <span class="token generic-function"><span class="token function">createList</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ok</span>
<span class="token keyword">const</span> stringList <span class="token operator">=</span> <span class="token generic-function"><span class="token function">createList</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ok</span>
<span class="token keyword">const</span> arrayList <span class="token operator">=</span> <span class="token generic-function"><span class="token function">createList</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//ok</span>
<span class="token keyword">const</span> booList <span class="token operator">=</span> <span class="token generic-function"><span class="token function">createList</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">boolean</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//error</span>
</code></pre></div><blockquote><p><code>any[]</code> 十一个数组类型,数组类型是有 length 属性的,所以 ok。<code>string</code>类型也是有 length 属性的，所以 ok。但是<code>boolean</code>就不能通过这个约束了</p></blockquote> <h3 id="条件控制"><a href="#条件控制" class="header-anchor">#</a> 条件控制</h3> <p><code>extends</code>除了做约束类型,还可以做条件控制,相当于与一个三元运算符,只不过针对<strong>类型</strong>的</p> <p><strong>表达式</strong>: <code>T extends U ? X : Y</code> <strong>含义</strong>: 如果 T 可以被分配给 U,则返回 X,否则返回 Y。一般条件下，如果 T 是 U 的值类型，则认为 T 可以分配给 U</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">IsNumber<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">number</span></span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">x</span> <span class="token operator">=</span> IsNumber<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre></div><h3 id="映射类型"><a href="#映射类型" class="header-anchor">#</a> 映射类型</h3> <p>映射类型相当于一个<strong>类型的函数</strong>，可以做一些<strong>类型运算</strong>，输入一个类型，输出另一个类型</p> <h4 id="几个内置的映射类型"><a href="#几个内置的映射类型" class="header-anchor">#</a> 几个内置的映射类型</h4> <p>typescript 在<code>lib.es5.d.ts</code>中内置了几个映射类型</p> <ul><li><code>Record&lt;K, T&gt;</code> --生成一个属性为 K, 类型为 T 的类型集合</li> <li><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Record<span class="token operator">&lt;</span><span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token builtin">any</span><span class="token punctuation">,</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token constant">K</span><span class="token punctuation">]</span><span class="token operator">:</span><span class="token constant">T</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><code>Partial&lt;T&gt;</code> --将<code>T</code>中的所有属性变成可选</li> <li><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Partial<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">typeof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><code>Required&lt;T&gt;</code> --将<code>T</code>中的所有属性变成必选</li> <li><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Required<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><code>Readonly&lt;T&gt;</code> --将<code>T</code>中的所有属性变成可读</li> <li><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Readonly<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">readonly</span> <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><code>Pick&lt;T,U&gt;</code> -- 选择<code>T</code>中可以赋值给<code>U</code>的类型</li> <li><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Pick<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token constant">K</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><code>Exclude&lt;T,U&gt;</code> --从<code>T</code>中<strong>剔除</strong>所有包含的<code>U</code>属性</li> <li><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Exclude<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">U</span></span> <span class="token operator">?</span> <span class="token builtin">never</span> <span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><code>Extract&lt;T,U&gt;</code> --从<code>T</code>中<strong>提取出</strong>所有包含的 <code>U</code> 属性值</li> <li><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Extract<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">U</span></span> <span class="token operator">?</span> <span class="token constant">T</span> <span class="token operator">:</span> <span class="token builtin">never</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><code>ReturnType&lt;T&gt;</code> --获得函数返回值类型</li> <li><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">ReturnType<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span></span> <span class="token builtin">any</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span>
  <span class="token operator">...</span>args<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">infer</span> <span class="token constant">R</span>
  <span class="token operator">?</span> <span class="token constant">R</span>
  <span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><code>InstanceType&lt;T&gt;</code> -- `获得构造函数类型的实例类型</li> <li><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">InstanceType<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token keyword">new</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span></span> <span class="token builtin">any</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token keyword">new</span></span> <span class="token punctuation">(</span>
  <span class="token operator">...</span>args<span class="token operator">:</span> <span class="token builtin">any</span>
<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">infer</span> <span class="token constant">R</span>
  <span class="token operator">?</span> <span class="token constant">R</span>
  <span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><code>NonNullable</code> --去除<code>null</code>或者<code>undefined</code></li> <li><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">NonNullable<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token keyword">null</span></span> <span class="token operator">|</span> <span class="token keyword">undefined</span> <span class="token operator">?</span> <span class="token builtin">never</span> <span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><code>Parameters&lt;T&gt;</code> --获得函数参数类型,而且返回的是只能包含一组类型的数组</li> <li><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Parameters<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span></span> <span class="token builtin">any</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span>
  <span class="token operator">...</span>args<span class="token operator">:</span> <span class="token keyword">infer</span> <span class="token constant">P</span>
<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">any</span>
  <span class="token operator">?</span> <span class="token constant">P</span>
  <span class="token operator">:</span> <span class="token builtin">never</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><code>ConstructorParameters&lt;T&gt;</code> --获取一个类的构造参数类型,并以数组的形式返回</li> <li><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">ConstructorParameters<span class="token operator">&lt;</span>
  <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token keyword">new</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span></span> <span class="token builtin">any</span>
<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token keyword">new</span></span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token keyword">infer</span> <span class="token constant">P</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">any</span> <span class="token operator">?</span> <span class="token constant">P</span> <span class="token operator">:</span> <span class="token builtin">never</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><code>Omit&lt;T, K&gt;</code> --忽略 T 中的 K 属性</li> <li><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Omit<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> Pick<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> Exclude<span class="token operator">&lt;</span><span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h4 id="非内置类型定义"><a href="#非内置类型定义" class="header-anchor">#</a> 非内置类型定义</h4> <ul><li><code>DeepReadonly&lt;T&gt;</code> --用来深度遍历 T,并将其所有属性变成只读属性</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">DeepReadonly<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token keyword">readonly</span> <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">:</span> DeepReadonly<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><code>DeepPartial&lt;T&gt;</code> -- 深度遍历 T,将所有属性变成可选属性</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">DeepPartial<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">Function</span></span>
  <span class="token operator">?</span> <span class="token constant">T</span>
  <span class="token operator">:</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">object</span>
  <span class="token operator">?</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">unknown</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token operator">?</span> DeepPartial<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">?</span><span class="token operator">:</span> DeepPartial<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token punctuation">}</span>
  <span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><code>ConvertNumberToString&lt;T&gt;</code> --将<code>number</code>类型转换为<code>string</code>类型</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">ConvertNumberToString<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token constant">K</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">string</span></span> <span class="token operator">?</span> <span class="token builtin">string</span> <span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><code>ValueOf&lt;T&gt;</code> --取出指定类型所有 value</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">ValueOf<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><code>Mutable&lt;T&gt;</code> --将所有属性的<code>readonly</code>移除</li></ul> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Mutable<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">-</span><span class="token keyword">readonly</span> <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="extends-条件分发"><a href="#extends-条件分发" class="header-anchor">#</a> extends 条件分发</h4> <p>对于<code>T extends U ? X : Y</code>来说,还存在一个特性,当 T 是一个联合类型时,会进行条件分发.</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Union</span> <span class="token operator">=</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name">isNumber<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">number</span></span> <span class="token operator">?</span> <span class="token string">&quot;isNumber&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;notNumber&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">UnionType</span> <span class="token operator">=</span> isNumber<span class="token operator">&lt;</span>Union<span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">//'notNumber'| 'isNumber'</span>
</code></pre></div><p>实际上,extends 运算会变成如下形式</p> <div class="language-ts extra-class"><pre class="language-ts"><code> <span class="token punctuation">(</span><span class="token builtin">string</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">number</span></span><span class="token operator">?</span> <span class="token string">'isNumber'</span><span class="token operator">:</span> <span class="token string">'NotNumber'</span><span class="token punctuation">)</span><span class="token operator">|</span><span class="token punctuation">(</span><span class="token builtin">number</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">number</span></span><span class="token operator">?</span> <span class="token string">'isNumber'</span><span class="token operator">:</span> <span class="token string">'NotNumber'</span><span class="token punctuation">)</span>
</code></pre></div><p><code>Extract</code>就是基于此类型,再配合<code>never</code>幺元的特性实现的</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Exclude<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">K</span></span> <span class="token operator">?</span> <span class="token builtin">never</span> <span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">Extract<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">U</span></span> <span class="token operator">?</span> <span class="token constant">T</span> <span class="token operator">:</span> <span class="token builtin">never</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T1</span></span> <span class="token operator">=</span> Exclude<span class="token operator">&lt;</span><span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">boolean</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// number</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T2</span></span> <span class="token operator">=</span> Extract<span class="token operator">&lt;</span><span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">boolean</span><span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// string |  boolean</span>
</code></pre></div><h4 id="infer-关键词"><a href="#infer-关键词" class="header-anchor">#</a> <code>infer</code> 关键词</h4> <p><code>infer</code> 可以对运算中心的类型进行存储,内置的<code>ReturnType</code> 就是基于此特性实现的</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">ReturnType<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">infer</span> <span class="token constant">R</span> <span class="token operator">?</span> <span class="token constant">R</span> <span class="token operator">:</span> <span class="token builtin">never</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="typescript-描述文件"><a href="#typescript-描述文件" class="header-anchor">#</a> TypeScript 描述文件</h2> <p>typescript 的描述文件，以 d.ts 结尾的文件名。大部分编辑器能识别 d.ts 文件，当你写 js 代码的时候给你智能提示。declare 全局提示，是的 ts 可以找到并识别出</p> <p>在我们尝试给一个 npm 包创建声明文件之前，需要先看看他的声明文件是否存在。一般来说，npm 包的声明文件可能存在于两个地方：</p> <ul><li>与该 npm 包绑定在一起。判断依据时 package.json 中有 types 字段，或者有一个 index.d.ts 声明文件。这种模式不需要额外安装其他包，是最为推荐的，所以自己在创建 npm 包的时候，最好也将声明文件与 npm 包绑定在一起</li> <li>发布到@types 里。我们只需要安装以下对应的@types 包就知道是否存在该声明文件。这种模式一般是 i 由于 npm 包的维护者没有提供声明文件，所以只能由其他人将生命文件发布到@types 里了</li></ul> <h3 id="全局变量-应用端补充"><a href="#全局变量-应用端补充" class="header-anchor">#</a> 全局变量 - 应用端补充</h3> <p>针对的是在应用端，<code>无import写法 + 补充npm包的全局变量</code>，(通过<code>&lt;script&gt;</code>标签引入第三方库，注入全局变量)</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">declare</span> <span class="token keyword">var</span> aaa<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token comment">// ?表示非必须，!?表示一定要有值</span>
<span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">getName</span><span class="token punctuation">(</span>id<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">render</span><span class="token punctuation">(</span>callback<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token keyword">declare</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> maxAge<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="npm-包-应用端补充"><a href="#npm-包-应用端补充" class="header-anchor">#</a> npm 包 - 应用端补充</h3> <p>针对的是在应用端，<code>import写法 + 补充npm包的变量</code>
核心：<code>只有在声明文件中使用export导出，然后再使用import导入后，才会用到这些类型声明</code></p> <h4 id="方法一-文件位置随意-源码中指定declare-module-xxx"><a href="#方法一-文件位置随意-源码中指定declare-module-xxx" class="header-anchor">#</a> 方法一： 文件位置随意，源码中指定<code>declare module xxx</code></h4> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">&quot;abcd&quot;</span> <span class="token punctuation">{</span>
  <span class="token keyword">export</span> <span class="token keyword">let</span> a<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token keyword">export</span> <span class="token keyword">namespace</span> c <span class="token punctuation">{</span>
    <span class="token keyword">let</span> cd<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> aaa <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">&quot;abcd&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
aaa<span class="token punctuation">.</span><span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">&quot;app&quot;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 导出是文件本身</span>
  <span class="token keyword">function</span> <span class="token function">aaa</span><span class="token punctuation">(</span>some<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token keyword">export</span> <span class="token operator">=</span> aaa<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 调用</span>
<span class="token keyword">let</span> app <span class="token operator">=</span> <span class="token function">app</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">app</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="方法二-源码直接-export-但文件位置有要求"><a href="#方法二-源码直接-export-但文件位置有要求" class="header-anchor">#</a> 方法二：源码直接 export，但文件位置有要求</h3> <p>指定到对应的<code>@types/moduleName/index.d.ts</code>文件，自动去除该文件找出 export，此时就不需要<code>declare module 'moduleName'</code>了</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// types/abcd/index.d.ts</span>
<span class="token keyword">export</span> <span class="token keyword">let</span> a<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><p>::: tips 总结
d.ts 文件(A.d.ts)文件放到哪个目录里，如果是模块化的话就放到和源码（A.js）文件的同一个目录下，如果是全局变量的话理论上放到哪都可以。
----以上说的是未在 tsconfig.json 文件里面特殊配置过
:::</p> <h3 id="扩展-npm-包-应用端补充"><a href="#扩展-npm-包-应用端补充" class="header-anchor">#</a> 扩展 npm 包 - 应用端补充</h3> <p>有时通过 import 导入一个插件模板，可以改变另一个原有模块的结构。此时如果原有模块已经有了类型声明文件，而插件模板没有类型声明文件（最常见的定义是<code>Vue.prototype.$xxx</code>），就会导致类型不完整，缺少部分的类型。
ts 提供了一个语法<code>declare module</code>，它可以用来扩展原有模块的类型</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 如果是需要扩展原有模块的话，需要类型声明文件中先引用原有模块，再使用declare module扩展原有模块</span>
<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">&quot;vue/types/vue&quot;</span> <span class="token punctuation">{</span>
  <span class="token keyword">interface</span> <span class="token class-name">Vue</span> <span class="token punctuation">{</span>
    $openDialog<span class="token operator">:</span> <span class="token builtin">Function</span><span class="token punctuation">;</span>
    $closeDialog<span class="token operator">:</span> <span class="token builtin">Function</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="custom-block warning"><p class="title"></p><p>在全局变量的声明文件中，是不允许出现 import,export 关键字。一旦出现了，那么他就会被视为一个 npm 库或 UMD 库，就不再是全局变量的声明文件了</p></div><h3 id="发布-npm-包-npm-源码端补充"><a href="#发布-npm-包-npm-源码端补充" class="header-anchor">#</a> 发布 npm 包-npm 源码端补充</h3> <ol><li><p><a href="https://ts.xcatliu.com/basics/declaration-files.html#%E8%87%AA%E5%8A%A8%E7%94%9F%E6%88%90%E5%A3%B0%E6%98%8E%E6%96%87%E4%BB%B6" target="_blank" rel="noopener noreferrer">自动生成声明文件<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>如果库的源码本身就是由 ts 写的，那么在使用 tsc 脚本将 ts 编译为 js 的时候，添加 declaration 选项，那么可以同时叶生成 d.ts 文件了。此时每个 ts 文件都会生成 d.ts 文件，使用方可以单独 import 每个 ts 子文件</p></li> <li><p><a href="https://ts.xcatliu.com/basics/declaration-files.html#%E5%8F%91%E5%B8%83%E5%A3%B0%E6%98%8E%E6%96%87%E4%BB%B6" target="_blank" rel="noopener noreferrer">发布声明文件<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ol><li>如果声明文件是<code>通过tsc自动生成</code>的，那么无需做任何其他配置，只需要把编译好的文件也发布到 npm 上，使用方就可以获取到类型提示了（因为每一个 ts 文件都有对应的.d.ts 文件）。</li> <li>如果是<code>手动写的声明文件</code>，那么需要满足以下条件之一，才能被正确的识别：
<ol><li>给 package.json 中的 types 或 typings 字段指定一个类型声明文件地址</li> <li>在项目根目录，编写一个<code>index.d.ts</code>文件</li> <li>针对入口文件（package.json 中的 main 字段指定的入口文件），编写一个同命不同后缀的.d.ts 文件</li></ol></li></ol></li></ol> <p>使用 ts 书写后缀时，自动生成同时，也可以手动设置 d.ts 文件</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">&quot;../lib&quot;</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="_5-tsconfig-json"><a href="#_5-tsconfig-json" class="header-anchor">#</a> 5 tsconfig.json</h2> <h3 id="_1-experimentaldecorators"><a href="#_1-experimentaldecorators" class="header-anchor">#</a> 1. experimentalDecorators</h3> <p><code>是否启用实验性的ES装饰器</code>。Boolean 类型，默认 false，<a href="https://www.typescriptlang.org/docs/handbook/decorators.html" target="_blank" rel="noopener noreferrer">官方解释<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>TypeScript 和 ES6 引入了 Class 的概念，同时在<a href="https://github.com/tc39/proposal-decorators" target="_blank" rel="noopener noreferrer">stage 2 proposal<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>提出了 java 等服务端语言早就有的装饰器模式，能极大简化书写代码，把一些通用逻辑封装到装饰器中。很多库都有用到该特性，比如 vue-class-component 和 vuex-class。<em>当你使用这些库时，必须开启 experimentalDecorators</em>.</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;f();evaluated&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>
    target<span class="token punctuation">,</span>
    propertyKey<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
    descriptor<span class="token operator">:</span> PropertyDescriptor
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;fn() called&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>启用 vuex-class 它是需要设置<code>strictFunctionTypes</code>选项为 false</p></blockquote> <h3 id="_2-strictpropertyinitialization"><a href="#_2-strictpropertyinitialization" class="header-anchor">#</a> 2. strictPropertyInitialization</h3> <p><code>是否类的undefined属性已经在构造函数里初始化</code>.boolean 类型,默认值:false
直白点,就是所有的属性值,都需要赋有初始值.建议把 strictPropertyInitialization 设置为 false,这样就不需要定义一个变量就必须附有初始值.对使用 vuex-class 的同学,建议把这个值设为 false,绝对能省很多事。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Home</span> <span class="token keyword">extends</span> <span class="token class-name">Vue</span> <span class="token punctuation">{</span>
  jobId<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token function">method1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>jobId<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>如果设置该选项为 true,需要同时启用--strictNullChecks 或启用 --strict</p></blockquote> <h3 id="_3-noimplicitany"><a href="#_3-noimplicitany" class="header-anchor">#</a> 3. noImplicitAny</h3> <p><code>有隐含的any类型时报错</code>。boolean 值,默认值为 false</p> <h3 id="target"><a href="#target" class="header-anchor">#</a> target</h3> <p><code>指定编译的ECMAScript目标版本</code>.枚举值&quot;ES3&quot;,&quot;ES5&quot;,&quot;ES6/2015&quot;,&quot;ES2016&quot;,&quot;ES2017&quot;,&quot;ESNext&quot;。默认值“ES3”</p> <p>typescript 是 ES6 的超集，所以你可以使用 ES6 来编写 ts 代码（通常我们也的确这么做）。然而，当编译 ts 代码时，可以把 ts 转为 ES5 或更早的 js 代码。所以需要选择一个编译的目标版本。vue-cli3 的 typescript 模板，设置为“ESNext”，因为现代大部分应用项目都会使用 webpack 进行打包,webpack 会把你的代码转换成在所有浏览器中可以运行的代码</p> <h3 id="_5-module"><a href="#_5-module" class="header-anchor">#</a> 5. module</h3> <p><code>指定生成哪个模块系统代码</code>.枚举值:&quot;None&quot;,&quot;CommonJS&quot;,&quot;AMD&quot;,&quot;System&quot;,&quot;UMD&quot;,&quot;ES6&quot;,&quot;ES2015&quot;,&quot;ESNext&quot;。默认值会根据--target 选项不同而不同，当 target 设置为 ES6 时，默认 module 为“ES6”,否则为&quot;commonjs&quot;</p> <p>通常使用 ES6 的模块系统来写代码,然而在 2015 年 1 月以前,基本上没有浏览器原生支持 ES6 的模块系统,所以需要转换为不同的模块的模块系统,如:CommonJS,AMD,SystemJS 等,而 module 选项就是指定编译使用对应的模块系统</p> <h3 id="_6-lib"><a href="#_6-lib" class="header-anchor">#</a> 6. lib</h3> <p><code>编译过程需要引入的库文件的列表</code>,string 类型，可选的值有很多，常用的有 ES5，ES6，ESNext，DOM，DOM.iterable，WebWorker，ScriptHost 等。该值默认值是根据--target 选项不同而不同。当 target 为 ES5 时，默认值为['DOM','ES5','ScriptHost'];当 target 为 ES6 时,默认值为['DOM','ES6','DOM.iterable','ScriptHost']</p> <p>为了在 ts 代码中使用 ES6 中的类,比如 Array.from、Set、Reflect 等，需要设置 lib 选项，在编译过程中把这些标准库引入。这样在编译过程中，如果遇到属于这些标准库的 class 或 api 时，ts 编译器不会报错</p> <h3 id="_7-moduleresolution"><a href="#_7-moduleresolution" class="header-anchor">#</a> 7. moduleResolution</h3> <p><code>决定如何处理模块</code>.string 类型,&quot;node 或者 classic&quot;,默认值&quot;classic&quot;.<a href="https://www.typescriptlang.org/docs/handbook/module-resolution.html" target="_blank" rel="noopener noreferrer">官方解释<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>也就是遇到<code>import {AAA} from './aaa</code>该如何去找对应文件模块.对于工程项目, 建议使用 node(vue-cli3 ts 模板默认设置为 node 策略),因为这个更符合平时的书写习惯和认知</p> <div class="custom-block tip"><p class="title"></p><p>//在源文件/root/src/A.ts 中 import {b} from &quot;./moduleB&quot;
// 两种解析方式查找方式不同'</p> <p>classic 解析方式</p> <ol><li>/root/src/moduleB.ts</li> <li>/root/src/moduleB.d.ts</li></ol> <p>node 模块解析方式</p> <ol><li>/root/src/moduleB.ts</li> <li>/root/src/moduleB.tsx</li> <li>/root/src/moduleB.d.ts /root/src/moduleB.package.json(if it specifies a &quot;types&quot; property)</li> <li>/root/src/moduleB/index.ts</li> <li>/root/src/moduleB/index.tsx</li> <li>/root/src/moduleB/index.d.ts</li></ol></div><h3 id="_8-paths"><a href="#_8-paths" class="header-anchor">#</a> 8. paths</h3> <p><code>模块名或路径映射的列表</code>。Object 值</p> <p>这是一个非常有用的选项，比如我们经常使用<code>@/utils/help</code>来代替<code>../src/utils/help</code></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;baseUrl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;.&quot;</span><span class="token punctuation">,</span> <span class="token comment">//注意:baseUrl必不可少</span>
  <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">&quot;@/*&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;src/*&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span> <span class="token comment">//映射列表</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_9-strictnullchecks"><a href="#_9-strictnullchecks" class="header-anchor">#</a> 9. strictNullChecks</h3> <p><code>是否开启严格的null检查模式</code>。boolean 值，默认值 false</p> <p>未处理的 null 和 undefined 经常会导致 bug 产生，所以 typescript 包含了 strictNullChecks 选项来帮助我们减少对这种情况的担忧。当启用了 strictNullChecks，null 和 undefined 获得了他们自己各自的类型 null 和 undefined。开启该模式有助于发现并处理可能为 undefined 的赋值。</p> <div class="custom-block warning"><p class="title">注意</p><p>启用--strict 相当于启用</p> <p>--noImplicitAny，--noImplicitThis，--alwaysStrict，--strictNullChecks，--StrictFunctionTypes 和 --strictPropertyInitialization</p></div><h3 id="_10-nounusedlocals"><a href="#_10-nounusedlocals" class="header-anchor">#</a> 10. noUnusedLocals</h3> <p><code>有未使用的变量时，是否抛出错误</code>。boolean 值，默认值：false</p> <h3 id="_11-nounusedparameters"><a href="#_11-nounusedparameters" class="header-anchor">#</a> 11. noUnUsedParameters</h3> <p><code>有未使用的参数时,是否抛出错误</code>。boolean 值，默认值：false</p> <h3 id="_12-allowjs"><a href="#_12-allowjs" class="header-anchor">#</a> 12. allowJS</h3> <p><code>是否允许编译 js 文件</code>。 boolean 值，默认值：false</p> <h3 id="_13-typeroots-和-types"><a href="#_13-typeroots-和-types" class="header-anchor">#</a> 13.typeRoots 和 types</h3> <p>默认所有可见的&quot;@types&quot;包含在编译过程中被包含进来。如果指定了 typeRoots，只有 typeRoots 下面的包才会被包含进来。</p> <blockquote><p>可以指定“types”：[]来禁用自动引入@types 包</p></blockquote> <h3 id="files、include-和-exclude"><a href="#files、include-和-exclude" class="header-anchor">#</a> files、include 和 exclude</h3> <p><code>编译文件包含哪些文件以及排除哪些文件</code></p> <p>未设置 include 时，编译器默认包含当前目录和子目录下所有的 Typescript 文件（.ts , .d.ts 和.tsx）。如果 allowJs 被设置为 true，JS 文件（js 和 jsx）也被包含进来。exclude 排除那些不需要编译的文件或文件夹</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;include&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;src/**/*&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;exclude&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;node_modules&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;**/*.spec.ts&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_15-tsconfig-json-全解析"><a href="#_15-tsconfig-json-全解析" class="header-anchor">#</a> 15. tsconfig.json 全解析</h3> <div class="language-json5 extra-class"><pre class="language-json5"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">/*基本选项*/</span>
    <span class="token property">&quot;target&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ES5&quot;</span><span class="token punctuation">,</span> <span class="token comment">//指定ECMAScript目标版本:&quot;ES3&quot;(default),&quot;ES5&quot;,&quot;ES2015&quot;,&quot;ES2016&quot;,&quot;ES2017&quot; or &quot;ESNext&quot;(&quot;ESNext&quot;表示最新的ES语法,包括还处在stage x阶段)</span>
    <span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;commonjs&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 指定使用模块:&quot;commonjs&quot;,&quot;amd&quot;,&quot;system&quot;,&quot;umd&quot;or&quot;es2015&quot;</span>
    <span class="token property">&quot;lib&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 指定要包含在编译中的库文件</span>
    <span class="token property">&quot;allowjs&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 允许编译javascript文件</span>
    <span class="token property">&quot;checkjs&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 报告javascript文件中的错误</span>
    <span class="token property">&quot;jsx&quot;</span><span class="token operator">:</span> <span class="token string">&quot;preserve&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 指定jsx代码的生成:&quot;preserve&quot;,&quot;react-native&quot;,or&quot;react&quot;</span>
    <span class="token property">&quot;declaration&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 生成相应的&quot;.d.ts&quot;文件</span>
    <span class="token property">&quot;sourceMap&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 生成相应的&quot;.map&quot;文件</span>
    <span class="token property">&quot;outFile&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 将输出文件合并为一个文件</span>
    <span class="token property">&quot;outDir&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 指定输出目录</span>
    <span class="token property">&quot;rootDir&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 用来控制输出目录结构 --outDir</span>
    <span class="token property">&quot;removeComments&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//删除编译后的所有注释</span>
    <span class="token property">&quot;noEmit&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 不生成输出文件</span>
    <span class="token property">&quot;importHelpers&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 从tslib导入扶住工具函数</span>
    <span class="token property">&quot;isolatedModules&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 将每个文件作为单独的模块(与'ts.transpileModule类似)</span>

    <span class="token comment">/*严格的类型检查选项*/</span>
    <span class="token property">&quot;strict&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 其用所有的严格类型的检查选项</span>
    <span class="token property">&quot;noImplicitAny&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//在表达式和声明上有隐含的any类型时报错</span>
    <span class="token property">&quot;strictNullChecks&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;noImplicitThis&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 当this的表达式为any类型的时候,生成一个错误</span>
    <span class="token property">&quot;alwaysStrict&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//以严格的检查每个模块,并在每个文件里加入&quot;use strict&quot;</span>
    <span class="token comment">/*额外的检查*/</span>
    <span class="token property">&quot;noUnusedLocals&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 有未使用的变量时,抛出错误</span>
    <span class="token property">&quot;noUnUsedParameters&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 有未使用的参数时,抛出错误</span>
    <span class="token property">&quot;noImplicitReturns&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 并不是所有函数里的代码都有返回值时，抛出错误</span>
    <span class="token property">&quot;noFallthroughCasesInSwitch&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 报告switch语句中的fallthrough错误（即，不允许switch的case语句贯穿）</span>

    <span class="token comment">/*模块解析选项*/</span>
    <span class="token property">&quot;moduleResolution&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node&quot;</span><span class="token punctuation">,</span> <span class="token comment">//选择模块解析策略:'node' or 'classic'(TypeScript pre-1.6),默认是'classic'</span>
    <span class="token property">&quot;baseUrl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 用于解析非相对模块名称的基目录</span>
    <span class="token property">&quot;paths&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 模块名到基于baseUrl的路径映射列表</span>
    <span class="token property">&quot;rootDirs&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 更稳健夹列表,其组合内容表示项目运行时的结构内容</span>
    <span class="token property">&quot;typeRoots&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">//包含类型声明的文件夹列表</span>
    <span class="token property">&quot;types&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">//需要包含的类型声明文件名列表</span>
    <span class="token property">&quot;allowSyntheticDefaultImports&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//允许从没有设置默认导出的模块中默认导入</span>

    <span class="token comment">/* Source Map Options*/</span>
    <span class="token property">&quot;sourceRoot&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./&quot;</span><span class="token punctuation">,</span> <span class="token comment">//指定调试器应该找到TypeScript文件而不是源文件的位置</span>
    <span class="token property">&quot;mapRoot&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./&quot;</span><span class="token punctuation">,</span> <span class="token comment">//指定调试器应该找到映射文件而不是生成文件的位置</span>
    <span class="token property">&quot;inlineSourceMap&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//生成单个sourcemaps文件,而不是将sourcemaps生成不同的文件</span>
    <span class="token property">&quot;inlineSources&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//将代码与sourcemaps生成到一个文件中,要求同时设置了 --inlineSourceMap或--sourceMap属性</span>

    <span class="token comment">/* 其他选项*/</span>
    <span class="token property">&quot;experimentalDecorators&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//启用装饰器</span>
    <span class="token property">&quot;emitDecoratorMetadata&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 为装饰器提供元数据的支持</span>
    <span class="token property">&quot;strictFunctionTypes&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token comment">// 禁用函数参数双向协变检查</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">/*指定编译文件或排除其他编译文件*/</span>
  <span class="token property">&quot;include&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;src/**/*&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;exclude&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;node_modules&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;**/*.spec.ts&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;files&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;core.ts&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;sys.ts&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;extends&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./config/base&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 从另一个配置文件里继承配置</span>

  <span class="token comment">//让IDE在保存文件时根据tsconfig.json重新生成文件</span>
  <span class="token property">&quot;compileOnSave&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// 支持这个特性需要Visual Studio 2015,TypeScript1.8.1以上并且安装atom-typescript插件</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="站在巨人肩膀上"><a href="#站在巨人肩膀上" class="header-anchor">#</a> 站在巨人肩膀上</h2> <ul><li><a href="https://lq782655835.github.io/blogs/project/ts-tsconfig.html" target="_blank" rel="noopener noreferrer">springleo's blog<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div class="language- extra-class"><pre class="language-text"><code>
</code></pre></div></div></section> <footer class="page-edit"><!----> <!----></footer> <!----> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-cb1513f6><li class="level-2" data-v-cb1513f6><a href="/blog/views/2020/typescript.html#_1-typescript-优势" class="sidebar-link reco-side-_1-typescript-优势" data-v-cb1513f6>1. TypeScript 优势</a></li><li class="level-2" data-v-cb1513f6><a href="/blog/views/2020/typescript.html#基础类型" class="sidebar-link reco-side-基础类型" data-v-cb1513f6>基础类型</a></li><li class="level-3" data-v-cb1513f6><a href="/blog/views/2020/typescript.html#any-和-unknown的区别" class="sidebar-link reco-side-any-和-unknown的区别" data-v-cb1513f6>any 和 unknown的区别</a></li><li class="level-3" data-v-cb1513f6><a href="/blog/views/2020/typescript.html#unknown-的正确用法" class="sidebar-link reco-side-unknown-的正确用法" data-v-cb1513f6>unknown 的正确用法</a></li><li class="level-3" data-v-cb1513f6><a href="/blog/views/2020/typescript.html#never" class="sidebar-link reco-side-never" data-v-cb1513f6>never</a></li><li class="level-2" data-v-cb1513f6><a href="/blog/views/2020/typescript.html#类型兼容性" class="sidebar-link reco-side-类型兼容性" data-v-cb1513f6>类型兼容性</a></li><li class="level-3" data-v-cb1513f6><a href="/blog/views/2020/typescript.html#对象子类型" class="sidebar-link reco-side-对象子类型" data-v-cb1513f6>对象子类型</a></li><li class="level-3" data-v-cb1513f6><a href="/blog/views/2020/typescript.html#函数子类型" class="sidebar-link reco-side-函数子类型" data-v-cb1513f6>函数子类型</a></li><li class="level-2" data-v-cb1513f6><a href="/blog/views/2020/typescript.html#高级类型" class="sidebar-link reco-side-高级类型" data-v-cb1513f6>高级类型</a></li><li class="level-3" data-v-cb1513f6><a href="/blog/views/2020/typescript.html#联合类型和交叉类型" class="sidebar-link reco-side-联合类型和交叉类型" data-v-cb1513f6>联合类型和交叉类型</a></li><li class="level-3" data-v-cb1513f6><a href="/blog/views/2020/typescript.html#类型保护" class="sidebar-link reco-side-类型保护" data-v-cb1513f6>类型保护</a></li><li class="level-3" data-v-cb1513f6><a href="/blog/views/2020/typescript.html#typeof-关键词" class="sidebar-link reco-side-typeof-关键词" data-v-cb1513f6>typeof 关键词</a></li><li class="level-3" data-v-cb1513f6><a href="/blog/views/2020/typescript.html#keyof-关键词" class="sidebar-link reco-side-keyof-关键词" data-v-cb1513f6>keyof 关键词</a></li><li class="level-3" data-v-cb1513f6><a href="/blog/views/2020/typescript.html#in-关键词" class="sidebar-link reco-side-in-关键词" data-v-cb1513f6>in 关键词</a></li><li class="level-3" data-v-cb1513f6><a href="/blog/views/2020/typescript.html#操作符" class="sidebar-link reco-side-操作符" data-v-cb1513f6>[]操作符</a></li><li class="level-3" data-v-cb1513f6><a href="/blog/views/2020/typescript.html#小栗子" class="sidebar-link reco-side-小栗子" data-v-cb1513f6>小栗子</a></li><li class="level-2" data-v-cb1513f6><a href="/blog/views/2020/typescript.html#泛型" class="sidebar-link reco-side-泛型" data-v-cb1513f6>泛型</a></li><li class="level-3" data-v-cb1513f6><a href="/blog/views/2020/typescript.html#小试牛刀" class="sidebar-link reco-side-小试牛刀" data-v-cb1513f6>小试牛刀</a></li><li class="level-3" data-v-cb1513f6><a href="/blog/views/2020/typescript.html#泛型约束" class="sidebar-link reco-side-泛型约束" data-v-cb1513f6>泛型约束</a></li><li class="level-3" data-v-cb1513f6><a href="/blog/views/2020/typescript.html#条件控制" class="sidebar-link reco-side-条件控制" data-v-cb1513f6>条件控制</a></li><li class="level-3" data-v-cb1513f6><a href="/blog/views/2020/typescript.html#映射类型" class="sidebar-link reco-side-映射类型" data-v-cb1513f6>映射类型</a></li><li class="level-2" data-v-cb1513f6><a href="/blog/views/2020/typescript.html#typescript-描述文件" class="sidebar-link reco-side-typescript-描述文件" data-v-cb1513f6>TypeScript 描述文件</a></li><li class="level-3" data-v-cb1513f6><a href="/blog/views/2020/typescript.html#全局变量-应用端补充" class="sidebar-link reco-side-全局变量-应用端补充" data-v-cb1513f6>全局变量 - 应用端补充</a></li><li class="level-3" data-v-cb1513f6><a href="/blog/views/2020/typescript.html#npm-包-应用端补充" class="sidebar-link reco-side-npm-包-应用端补充" data-v-cb1513f6>npm 包 - 应用端补充</a></li><li class="level-3" data-v-cb1513f6><a href="/blog/views/2020/typescript.html#方法二-源码直接-export-但文件位置有要求" class="sidebar-link reco-side-方法二-源码直接-export-但文件位置有要求" data-v-cb1513f6>方法二：源码直接 export，但文件位置有要求</a></li><li class="level-3" data-v-cb1513f6><a href="/blog/views/2020/typescript.html#扩展-npm-包-应用端补充" class="sidebar-link reco-side-扩展-npm-包-应用端补充" data-v-cb1513f6>扩展 npm 包 - 应用端补充</a></li><li class="level-3" data-v-cb1513f6><a href="/blog/views/2020/typescript.html#发布-npm-包-npm-源码端补充" class="sidebar-link reco-side-发布-npm-包-npm-源码端补充" data-v-cb1513f6>发布 npm 包-npm 源码端补充</a></li><li class="level-2" data-v-cb1513f6><a href="/blog/views/2020/typescript.html#_5-tsconfig-json" class="sidebar-link reco-side-_5-tsconfig-json" data-v-cb1513f6>5 tsconfig.json</a></li><li class="level-3" data-v-cb1513f6><a href="/blog/views/2020/typescript.html#_1-experimentaldecorators" class="sidebar-link reco-side-_1-experimentaldecorators" data-v-cb1513f6>1. experimentalDecorators</a></li><li class="level-3" data-v-cb1513f6><a href="/blog/views/2020/typescript.html#_2-strictpropertyinitialization" class="sidebar-link reco-side-_2-strictpropertyinitialization" data-v-cb1513f6>2. strictPropertyInitialization</a></li><li class="level-3" data-v-cb1513f6><a href="/blog/views/2020/typescript.html#_3-noimplicitany" class="sidebar-link reco-side-_3-noimplicitany" data-v-cb1513f6>3. noImplicitAny</a></li><li class="level-3" data-v-cb1513f6><a href="/blog/views/2020/typescript.html#target" class="sidebar-link reco-side-target" data-v-cb1513f6>target</a></li><li class="level-3" data-v-cb1513f6><a href="/blog/views/2020/typescript.html#_5-module" class="sidebar-link reco-side-_5-module" data-v-cb1513f6>5. module</a></li><li class="level-3" data-v-cb1513f6><a href="/blog/views/2020/typescript.html#_6-lib" class="sidebar-link reco-side-_6-lib" data-v-cb1513f6>6. lib</a></li><li class="level-3" data-v-cb1513f6><a href="/blog/views/2020/typescript.html#_7-moduleresolution" class="sidebar-link reco-side-_7-moduleresolution" data-v-cb1513f6>7. moduleResolution</a></li><li class="level-3" data-v-cb1513f6><a href="/blog/views/2020/typescript.html#_8-paths" class="sidebar-link reco-side-_8-paths" data-v-cb1513f6>8. paths</a></li><li class="level-3" data-v-cb1513f6><a href="/blog/views/2020/typescript.html#_9-strictnullchecks" class="sidebar-link reco-side-_9-strictnullchecks" data-v-cb1513f6>9. strictNullChecks</a></li><li class="level-3" data-v-cb1513f6><a href="/blog/views/2020/typescript.html#_10-nounusedlocals" class="sidebar-link reco-side-_10-nounusedlocals" data-v-cb1513f6>10. noUnusedLocals</a></li><li class="level-3" data-v-cb1513f6><a href="/blog/views/2020/typescript.html#_11-nounusedparameters" class="sidebar-link reco-side-_11-nounusedparameters" data-v-cb1513f6>11. noUnUsedParameters</a></li><li class="level-3" data-v-cb1513f6><a href="/blog/views/2020/typescript.html#_12-allowjs" class="sidebar-link reco-side-_12-allowjs" data-v-cb1513f6>12. allowJS</a></li><li class="level-3" data-v-cb1513f6><a href="/blog/views/2020/typescript.html#_13-typeroots-和-types" class="sidebar-link reco-side-_13-typeroots-和-types" data-v-cb1513f6>13.typeRoots 和 types</a></li><li class="level-3" data-v-cb1513f6><a href="/blog/views/2020/typescript.html#files、include-和-exclude" class="sidebar-link reco-side-files、include-和-exclude" data-v-cb1513f6>files、include 和 exclude</a></li><li class="level-3" data-v-cb1513f6><a href="/blog/views/2020/typescript.html#_15-tsconfig-json-全解析" class="sidebar-link reco-side-_15-tsconfig-json-全解析" data-v-cb1513f6>15. tsconfig.json 全解析</a></li><li class="level-2" data-v-cb1513f6><a href="/blog/views/2020/typescript.html#站在巨人肩膀上" class="sidebar-link reco-side-站在巨人肩膀上" data-v-cb1513f6>站在巨人肩膀上</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><!----></div></div>
    <script src="/blog/assets/js/app.1bc9607c.js" defer></script><script src="/blog/assets/js/3.434a33f8.js" defer></script><script src="/blog/assets/js/1.32e05f2b.js" defer></script><script src="/blog/assets/js/20.379b0629.js" defer></script><script src="/blog/assets/js/9.dae10805.js" defer></script>
  </body>
</html>
